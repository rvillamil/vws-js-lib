// @ts-nocheck
/* eslint-disable no-console */
//
// Testing support:
//
// - mocha ...: https://mochajs.org/
// - assert ..: https://nodejs.org/api/all.html
//
const assert = require('assert')
const cheerio = require('cheerio')
const searchParser = require('../../../lib/crawlers/dontorrent/parser/searchParser')

describe('dontorrent/parser/searchParser', function () {

    //
    // Retorna un array de shows donde podemos tner ShowCollection o Shows
    //
    // OJO que nos banean si pedimos muchos resultados
    //
    describe('#parseTableWithTVShows()', function () {
        it('should parsear tall shows from HTML table ', function () {
            // http://www.howtocreate.co.uk/tutorials/jsexamples/syntax/prepareInline.html

            var tableData = '<div class=\"col-lg\">\n<div class=\"seccion\" id=\"buscador\">\n<div class=\"card shadow-sm p-4\">\n<div class=\"card-body\">\n<h1 class=\"display-4\">Resultados<\/h1>\n<p class=\"lead\">Has realizado una b&uacute;squeda con <b>star wars<\/b>.<\/p>\n<p class=\"lead\">Se han encontrado <b>78<\/b> resultados.<\/p>\n<hr class=\"my-4\"><p><span><a href=\'\/pelicula\/19942\/Han-Solo-Una-historia-de-Star-Wars-3D\' class=\"text-decoration-none\">Han Solo: Una historia de <span class=\"text-secondary\">Star Wars<\/span> (3D).<\/a> <span>(BluRay-1080p)<\/a><\/span><span class=\"badge badge-primary float-right\">Película<\/span><\/p><p><span><a href=\'\/pelicula\/19940\/Han-Solo-Una-historia-de-Star-Wars-4K\' class=\"text-decoration-none\">Han Solo: Una historia de <span class=\"text-secondary\">Star Wars<\/span> [4K].<\/a> <span>(BDremux-1080p)<\/a><\/span><span class=\"badge badge-primary float-right\">Película<\/span><\/p><p><span><a href=\'\/pelicula\/19902\/Han-Solo-Una-historia-de-Star-Wars\' class=\"text-decoration-none\">Han Solo: Una historia de <span class=\"text-secondary\">Star Wars<\/span>.<\/a> <span>(HDRip)<\/a><\/span><span class=\"badge badge-primary float-right\">Película<\/span><\/p><p><span><a href=\'\/pelicula\/19941\/Han-Solo-Una-historia-de-Star-Wars\' class=\"text-decoration-none\">Han Solo: Una historia de <span class=\"text-secondary\">Star Wars<\/span>.<\/a> <span>(BluRay-1080p)<\/a><\/span><span class=\"badge badge-primary float-right\">Película<\/span><\/p><p><span><a href=\'\/pelicula\/9442\/Lego-Star-Wars-Las-crnicas-de-Yoda-La-amenaza-de-los-Sith\' class=\"text-decoration-none\">Lego <span class=\"text-secondary\">Star Wars<\/span>: Las crónicas de Yoda - La amenaza de los Sith.<\/a> <span>(DVDRip)<\/a><\/span><span class=\"badge badge-primary float-right\">Película<\/span><\/p><p><span><a href=\'\/pelicula\/12837\/Phineas-y-Ferb-Star-Wars\' class=\"text-decoration-none\">Phineas y Ferb: <span class=\"text-secondary\">Star Wars<\/span>.<\/a> <span>(DVDRip)<\/a><\/span><span class=\"badge badge-primary float-right\">Película<\/span><\/p><p><span><a href=\'\/pelicula\/16468\/Rogue-One-Una-historia-de-Star-Wars-\' class=\"text-decoration-none\">Rogue One: Una historia de <span class=\"text-secondary\">Star Wars<\/span> <\/a> <span>(BluRay-720p)<\/a><\/span><span class=\"badge badge-primary float-right\">Película<\/span><\/p><p><span><a href=\'\/pelicula\/15294\/Rogue-One-Una-historia-de-Star-Wars-4K-HDR\' class=\"text-decoration-none\">Rogue One: Una historia de <span class=\"text-secondary\">Star Wars<\/span> (4K-HDR).<\/a> <span>(BDremux-1080p)<\/a><\/span><span class=\"badge badge-primary float-right\">Película<\/span><\/p><p><span><a href=\'\/pelicula\/15027\/Rogue-One-Una-historia-de-Star-Wars-FullBluRay\' class=\"text-decoration-none\">Rogue One: Una historia de <span class=\"text-secondary\">Star Wars<\/span> (FullBluRay).<\/a> <span>(BDremux-1080p)<\/a><\/span><span class=\"badge badge-primary float-right\">Película<\/span><\/p><p><span><a href=\'\/pelicula\/15022\/Rogue-One-Una-historia-de-Star-Wars-3D\' class=\"text-decoration-none\">Rogue One: Una historia de <span class=\"text-secondary\">Star Wars<\/span> [3D].<\/a> <span>(BluRay-1080p)<\/a><\/span><span class=\"badge badge-primary float-right\">Película<\/span><\/p><p><span><a href=\'\/serie\/36002\/36003\/Star-Wars-Droids-Las-aventuras-de-R2D2-y-C3PO-1-Temporada\' class=\"text-decoration-none\"><span class=\"text-secondary\">star wars<\/span> Droids: Las aventuras de R2D2 y C3PO - 1ª Temporada<\/a> <span>(DVDRip)<\/span><\/span><span class=\"badge badge-primary float-right\">Serie<\/span><\/p><p><span><a href=\'\/serie\/21015\/21016\/Star-Wars-Rebels-1-Temporada\' class=\"text-decoration-none\"><span class=\"text-secondary\">star wars<\/span> Rebels - 1ª Temporada<\/a> <span>(HDTV)<\/span><\/span><span class=\"badge badge-primary float-right\">Serie<\/span><\/p><p><span><a href=\'\/serie\/25434\/25435\/Star-Wars-Rebels-2-Temporada\' class=\"text-decoration-none\"><span class=\"text-secondary\">star wars<\/span> Rebels - 2ª Temporada<\/a> <span>(HDTV)<\/span><\/span><span class=\"badge badge-primary float-right\">Serie<\/span><\/p><p><span><a href=\'\/serie\/46462\/46464\/Star-Wars-Rebels-3-Temporada\' class=\"text-decoration-none\"><span class=\"text-secondary\">star wars<\/span> Rebels - 3ª Temporada<\/a> <span>(HDTV)<\/span><\/span><span class=\"badge badge-primary float-right\">Serie<\/span><\/p><p><span><a href=\'\/serie\/46463\/46485\/Star-Wars-Rebels-3-Temporada-1080p\' class=\"text-decoration-none\"><span class=\"text-secondary\">star wars<\/span> Rebels - 3ª Temporada [1080p]<\/a> <span>(HDTV-1080p)<\/span><\/span><span class=\"badge badge-primary float-right\">Serie<\/span><\/p><p><span><a href=\'\/serie\/46700\/46804\/Star-Wars-Rebels-4-Temporada-\' class=\"text-decoration-none\"><span class=\"text-secondary\">star wars<\/span> Rebels - 4ª Temporada <\/a> <span>(HDTV)<\/span><\/span><span class=\"badge badge-primary float-right\">Serie<\/span><\/p><p><span><a href=\'\/serie\/46699\/46703\/Star-Wars-Rebels-4-Temporada-720p\' class=\"text-decoration-none\"><span class=\"text-secondary\">star wars<\/span> Rebels - 4ª Temporada [720p]<\/a> <span>(HDTV-720p)<\/span><\/span><span class=\"badge badge-primary float-right\">Serie<\/span><\/p><p><span><a href=\'\/serie\/59812\/59813\/Star-Wars-Resistance-1-Temporada\' class=\"text-decoration-none\"><span class=\"text-secondary\">star wars<\/span> Resistance - 1ª Temporada<\/a> <span>(HDTV)<\/span><\/span><span class=\"badge badge-primary float-right\">Serie<\/span><\/p><p><span><a href=\'\/serie\/56592\/56593\/Star-Wars-Resistance-1-Temporada-720p\' class=\"text-decoration-none\"><span class=\"text-secondary\">star wars<\/span> Resistance - 1ª Temporada [720p]<\/a> <span>(HDTV-720p)<\/span><\/span><span class=\"badge badge-primary float-right\">Serie<\/span><\/p><p><span><a href=\'\/serie\/595\/596\/Star-Wars-Las-guerras-Clon-1-2-y-3-Temporada\' class=\"text-decoration-none\"><span class=\"text-secondary\">star wars<\/span>: Las guerras Clon - 1ª, 2ª y 3ª Temporada.<\/a> <span>(DVDRip)<\/span><\/span><span class=\"badge badge-primary float-right\">Serie<\/span><\/p><p><span><a href=\'\/juego\/3258\/-Star-Wars-Rogue-One-Pinball\' class=\"text-decoration-none\"> <span class=\"text-secondary\">star wars<\/span> Rogue One Pinball<\/a><\/span><span class=\"badge badge-primary float-right\">Juego<\/span><\/p><p><span><a href=\'\/juego\/2183\/Angry-Birds-Star-Wars\' class=\"text-decoration-none\">Angry Birds <span class=\"text-secondary\">star wars<\/span>.<\/a><\/span><span class=\"badge badge-primary float-right\">Juego<\/span><\/p><p><span><a href=\'\/juego\/1850\/Angry-Birds-Star-Wars\' class=\"text-decoration-none\">Angry Birds <span class=\"text-secondary\">star wars<\/span>.<\/a><\/span><span class=\"badge badge-primary float-right\">Juego PC<\/span><\/p><p><span><a href=\'\/juego\/2199\/Angry-Birds-Star-Wars\' class=\"text-decoration-none\">Angry Birds <span class=\"text-secondary\">star wars<\/span>.<\/a><\/span><span class=\"badge badge-primary float-right\">Juego<\/span><\/p><p><span><a href=\'\/juego\/1543\/Kinect-Star-Wars\' class=\"text-decoration-none\">Kinect <span class=\"text-secondary\">star wars<\/span><\/a><\/span><span class=\"badge badge-primary float-right\">Juego<\/span><\/p><p><span><a href=\'\/juego\/4026\/Lego-Star-Wars-III-The-Clone-Wars\' class=\"text-decoration-none\">Lego <span class=\"text-secondary\">star wars<\/span> III The Clone Wars<\/a><\/span><span class=\"badge badge-primary float-right\">Juego<\/span><\/p><p><span><a href=\'\/juego\/3638\/Lego-Star-Wars-III-The-Clone-Wars\' class=\"text-decoration-none\">Lego <span class=\"text-secondary\">star wars<\/span> III The Clone Wars<\/a><\/span><span class=\"badge badge-primary float-right\">Juego PSP<\/span><\/p><p><span><a href=\'\/juego\/1046\/Lego-Star-Wars-III-The-Clone-Wars\' class=\"text-decoration-none\">Lego <span class=\"text-secondary\">star wars<\/span> III: The Clone Wars<\/a><\/span><span class=\"badge badge-primary float-right\">Juego PC<\/span><\/p><p><span><a href=\'\/juego\/3312\/LEGO-Star-Wars-The-Force-Awakens\' class=\"text-decoration-none\">LEGO <span class=\"text-secondary\">star wars<\/span> The Force Awakens<\/a><\/span><span class=\"badge badge-primary float-right\">Juego<\/span><\/p><p><span><a href=\'\/juego\/3800\/LEGO-Star-Wars-The-Force-Awakens\' class=\"text-decoration-none\">LEGO <span class=\"text-secondary\">star wars<\/span> The Force Awakens<\/a><\/span><span class=\"badge badge-primary float-right\">Juego<\/span><\/p><p><span><a href=\'\/musica\/4966\/Rogue-One-A-Star-Wars-Story\' class=\"text-decoration-none\">Rogue One: A <span class=\"text-secondary\">star wars<\/span> Story.<\/a><\/span><span class=\"badge badge-primary float-right\">Música<\/span><\/p><p><span><a href=\'\/musica\/3988\/Star-Wars-The-Force-Awakens\' class=\"text-decoration-none\"><span class=\"text-secondary\">star wars<\/span>: The Force Awakens.<\/a><\/span><span class=\"badge badge-primary float-right\">Música<\/span><\/p><\/span>\n<\/span> <\/div>\n<\/div>'
            const shows = searchParser.parseTableWithTVShows(cheerio.load(tableData), 4)
            
            assert.equal(shows.length, 4)
        })
    })
})